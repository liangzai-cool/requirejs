<!DOCTYPE html>
<html>
<head>
    <title>FAQ: RequireJS Optimizations</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="../main.css">
    <link rel="icon" type="image/x-icon" href="/favicon.png">
    <!--[if IE]> <link rel="stylesheet" type="text/css" href="../ie.css" /> <![endif]-->
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.4/dojox/highlight/resources/highlight.css">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="../init.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.4/dojo/dojo.xd.js"></script>
    <script type="text/javascript">
        dojo.require("dojox.highlight");
        dojo.require("dojox.highlight.languages.javascript");
        dojo.require("dojox.highlight.languages.html");
        dojo.ready(function() {
            dojo.query("pre > code")
                .forEach(function(node) {
                    if (node.innerHTML.indexOf("DOCTYPE") !== -1 || node.innerHTML.indexOf('&lt;script') !== -1) {
                        dojo.addClass(node, "html");
                    } else {
                        dojo.addClass(node, "javascript");
                    }
                })
                .forEach(dojox.highlight.init);
        });
    </script>
</head>
<body>
<div id="grid"></div>
<div id="wrapper">

    <div id="navBg"></div>
    <button type="button" role="button" aria-label="Toggle Navigation" class="off-canvas-button">
      <span class="lines">
        <span class="line">&nbsp;</span>
        <span class="line">&nbsp;</span>
        <span class="line">&nbsp;</span>
      </span>
      <span class="cross">&times;</span>
    </button>
    <div id="nav" class="mono">
        <a class="homeImageLink" href="../"></a>
        <h1 title="英文原文：a javascript module loader"> javascript <br> 模块加载器 </h1>

        <ul>
            <li class="hbox">
                <a href="../" title="英文原文：Home">首页</a>
                <span class="spacer boxFlex"></span>
                <span class="icon home"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="start.html" title="英文原文：Start">开始</a>
                <span class="spacer boxFlex"></span>
                <span class="icon start"></span>
            </li>
            <li class="hbox">
                <a class="local" href="download.html" title="英文原文：Download">下载</a>
                <span class="spacer boxFlex"></span>
                <span class="icon download"></span>
            </li>
            <li class="hbox">
                <a class="local" href="api.html">API</a>
                <span class="spacer boxFlex"></span>
                <span class="icon api"></span>
            </li>
            <li class="hbox">
                <a class="local" href="optimization.html" title="英文原文：Optimization">优化</a>
                <span class="spacer boxFlex"></span>
                <span class="icon optimize"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="jquery.html" title="英文原文：Use with jQuery">和jQuery一起使用</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
            <li class="hbox">
                <a class="local" href="node.html" title="英文原文：Use with Node">在Node中运行</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
            <li class="hbox">
                <a class="local" href="dojo.html" title="英文原文：Use with Dojo">和Dojo一起使用</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
            <li class="hbox">
                <a class="local" href="commonjs.html" title="英文原文：CommonJS Notes">CommonJS 说明</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="faq.html" title="英文原文：FAQs">常见问题</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="errors.html" title="英文原文：Common Errors">常见异常</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="plugins.html" title="英文原文：Writing Plugins">编写插件</a>
                <span class="spacer boxFlex"></span>
                <span class="icon api"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="why.html" title="英文原文：Why Web Modules">为什么要网页模块化</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="whyamd.html" title="英文原文：Why AMD">为什么要遵循AMD规范</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="requirements.html" title="英文原文：Requirements">必要条件</a>
                <span class="spacer boxFlex"></span>
                <span class="icon requirement"></span>
            </li>
            <li class="hbox">
                <a class="local" href="history.html" title="英文原文：History">历史</a>
                <span class="spacer boxFlex"></span>
                <span class="icon history"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a href="https://stackoverflow.com/questions/tagged/requirejs" title="英文原文：Get Help">获取帮助</a>
                <span class="spacer boxFlex" title="英文原文：Home"></span>
                <span class="icon help"></span>
            </li>
            <li class="hbox">
                <a href="http://jrburke.com/" title="英文原文：Blog">博客</a>
                <span class="spacer boxFlex"></span>
                <span class="icon blog"></span>
            </li>
            <li class="hbox">
                <a href="http://twitter.com/jrburke">Twitter</a>
                <span class="spacer boxFlex"></span>
                <span class="icon twitter"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a href="http://github.com/requirejs/requirejs">GitHub</a>
                <span class="spacer boxFlex"></span>
                <span class="icon git"></span>
            </li>
            <li class="hbox">
                <a class="local" href="contributing.html" title="英文原文：Contributing">贡献</a>
                <span class="spacer boxFlex"></span>
                <span class="icon fork"></span>
            </li>
        </ul>


        <ul>
            <li class="version" title="英文原文：2.2.0 Docs (upgrade info)">2.2.0 文档 (<a href="https://github.com/requirejs/requirejs/wiki/Upgrading-to-RequireJS-2.1">如何升级</a>)</li>
            <!-- <li class="version"><a class="local" href="1.0/">1.0 Doc Link</a></li> -->
        </ul>

    </div>

    <div id="content"><div id="directory" class="section">
<h1>FAQ: RequireJS Optimizations</h1>
<ul class="index mono">
<li class="hbox"><a href="#usage">How do I use the Optimization Tool?</a><span class="spacer boxFlex"></span><span class="sect">&sect; 1</span></li>
<li class="hbox"><a href="#wrap">How can I provide a library to others that does not depend on RequireJS?</a><span class="spacer boxFlex"></span><span class="sect">&sect; 2</span></li>
<li class="hbox"><a href="#namespace">How can I namespace my code to play well in other people's pages?</a><span class="spacer boxFlex"></span><span class="sect">&sect; 3</span></li>
</ul>
</div>

<div class="section">
<h2><a name="usage">How do I use the Optimization Tool?</a><span class="sectionMark">&sect; 1</span></h2>

<p>See the <a href="optimization.html">general optimization page</a> for basic set-up. Also see the <a href="jquery.html">jQuery doc page</a> for a good way to set up your project, even if you are not using jQuery.</p>
</div>

<div class="section">
<h2><a name="wrap">How can I provide a library to others that does not depend on RequireJS?</a><span class="sectionMark">&sect; 2</span></h2>

<p>If you are building a library for use on web pages that may not use RequireJS or an AMD loader, you can use the optimizer to combine
all your modules into one file, then wrap them in a function and use an AMD API shim. This allows you to ship code that does not ship with all
of RequireJS, and allows you to export any kind of API that works on a plain web page without an AMD loader.</p>

<p><a href="https://github.com/requirejs/almond">almond</a> is an AMD API shim that is very small, so it can be used in place of require.js
when all of your modules are built into one file using the RequireJS optimizer. The
<a href="https://github.com/requirejs/r.js/blob/master/build/example.build.js#L464">wrap</a> build config option will put a function
wrapper around the code, or you can provide your own wrapper if you need to do extra logic.</p>

<p>See the almond project for details on how to build with the API shim and with wrap.</p>

<p>If you need to dynamically load code after a build, then using almond+wrap will not be sufficient as almond cannot dynamically
load code. Instead, you may want to namespace your use of require/define. See next section.</p>
</div>

<div class="section">
<h2><a name="namespace">How can I namespace my code to play well in other people's pages?</a><span class="sectionMark">&sect; 3</span></h2>

<p>If you want to provide your code to web sites that may not use an AMD loader, and you need to dynamically load code,
doing a simple <a href="#wrap">one file build with a wrapper</a> is not enough. You also may want isolate your loading needs from
the page's AMD loader.</p>

<p>There is a <a href="https://github.com/requirejs/r.js/blob/master/build/example.build.js#L296">namespace</a> build option that
does the following:</p>

<ul>
    <li>Renames requirejs, require and define uses to have "namespace." in front of them.</li>
    <li>If the file does an existence check for define, in the following form <code>typeof define === 'function' && define.amd</code>,
    then it will prefix the define references with "namespace.".</li>
    <li>If require.js is included in the built file, it will make sure it exposes the "namespace." versions of the API.</li>
</ul>

<p>Do not code your source with namespace.require()/namespace.define() calls, but rather use require()/define() as you
normally would, then use the optimizer to do the renaming.</p>

</div>
    </div>
    <div id="footer" class="mono">
        <span class="line" title="英文原文：Latest Release: 2.2.0">最新发布版本: <a href="/docs/download.html">2.2.0</a></span>
        <span class="line" title="英文原文：Open source: new BSD or MIT licensed">开源协议: <a href="https://github.com/requirejs/requirejs/blob/master/LICENSE">NEW BSD 或者 MIT 许可</a></span>
        <span class="line" title="英文原文：web design by Andy Chung &copy; 2011-2015">网站由 <a href="http://andychung.me/">Andy Chung</a> 设计 &copy; 2011-2015</span>
    </div>
</div>

</body>
</html>
