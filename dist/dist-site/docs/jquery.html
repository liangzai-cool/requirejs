<!DOCTYPE html>
<html>
<head>
    <title>How to use RequireJS with jQuery</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="../main.css">
    <link rel="icon" type="image/x-icon" href="/favicon.png">
    <!--[if IE]> <link rel="stylesheet" type="text/css" href="../ie.css" /> <![endif]-->
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.4/dojox/highlight/resources/highlight.css">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="../init.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.4/dojo/dojo.xd.js"></script>
    <script type="text/javascript">
        dojo.require("dojox.highlight");
        dojo.require("dojox.highlight.languages.javascript");
        dojo.require("dojox.highlight.languages.html");
        dojo.ready(function() {
            dojo.query("pre > code")
                .forEach(function(node) {
                    if (node.innerHTML.indexOf("DOCTYPE") !== -1 || node.innerHTML.indexOf('&lt;script') !== -1) {
                        dojo.addClass(node, "html");
                    } else {
                        dojo.addClass(node, "javascript");
                    }
                })
                .forEach(dojox.highlight.init);
        });
    </script>
</head>
<body>
<div id="grid"></div>
<div id="wrapper">

    <div id="navBg"></div>
    <button type="button" role="button" aria-label="Toggle Navigation" class="off-canvas-button">
      <span class="lines">
        <span class="line">&nbsp;</span>
        <span class="line">&nbsp;</span>
        <span class="line">&nbsp;</span>
      </span>
      <span class="cross">&times;</span>
    </button>
    <div id="nav" class="mono">
        <a class="homeImageLink" href="../"></a>
        <h1 title="英文原文：a javascript module loader"> javascript <br> 模块加载器 </h1>

        <ul>
            <li class="hbox">
                <a href="../" title="英文原文：Home">首页</a>
                <span class="spacer boxFlex"></span>
                <span class="icon home"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="start.html" title="英文原文：Start">开始</a>
                <span class="spacer boxFlex"></span>
                <span class="icon start"></span>
            </li>
            <li class="hbox">
                <a class="local" href="download.html" title="英文原文：Download">下载</a>
                <span class="spacer boxFlex"></span>
                <span class="icon download"></span>
            </li>
            <li class="hbox">
                <a class="local" href="api.html">API</a>
                <span class="spacer boxFlex"></span>
                <span class="icon api"></span>
            </li>
            <li class="hbox">
                <a class="local" href="optimization.html" title="英文原文：Optimization">优化</a>
                <span class="spacer boxFlex"></span>
                <span class="icon optimize"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="jquery.html" title="英文原文：Use with jQuery">和jQuery一起使用</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
            <li class="hbox">
                <a class="local" href="node.html" title="英文原文：Use with Node">在Node中运行</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
            <li class="hbox">
                <a class="local" href="dojo.html" title="英文原文：Use with Dojo">和Dojo一起使用</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
            <li class="hbox">
                <a class="local" href="commonjs.html" title="英文原文：CommonJS Notes">CommonJS 说明</a>
                <span class="spacer boxFlex"></span>
                <span class="icon script"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="faq.html" title="英文原文：FAQs">常见问题</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="errors.html" title="英文原文：Common Errors">常见异常</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="plugins.html" title="英文原文：Writing Plugins">编写插件</a>
                <span class="spacer boxFlex"></span>
                <span class="icon api"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a class="local" href="why.html" title="英文原文：Why Web Modules">为什么要网页模块化</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="whyamd.html" title="英文原文：Why AMD">为什么要遵循AMD规范</a>
                <span class="spacer boxFlex"></span>
                <span class="icon question"></span>
            </li>
            <li class="hbox">
                <a class="local" href="requirements.html" title="英文原文：Requirements">必要条件</a>
                <span class="spacer boxFlex"></span>
                <span class="icon requirement"></span>
            </li>
            <li class="hbox">
                <a class="local" href="history.html" title="英文原文：History">历史</a>
                <span class="spacer boxFlex"></span>
                <span class="icon history"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a href="https://stackoverflow.com/questions/tagged/requirejs" title="英文原文：Get Help">获取帮助</a>
                <span class="spacer boxFlex" title="英文原文：Home"></span>
                <span class="icon help"></span>
            </li>
            <li class="hbox">
                <a href="http://jrburke.com/" title="英文原文：Blog">博客</a>
                <span class="spacer boxFlex"></span>
                <span class="icon blog"></span>
            </li>
            <li class="hbox">
                <a href="http://twitter.com/jrburke">Twitter</a>
                <span class="spacer boxFlex"></span>
                <span class="icon twitter"></span>
            </li>
        </ul>

        <ul>
            <li class="hbox">
                <a href="http://github.com/requirejs/requirejs">GitHub</a>
                <span class="spacer boxFlex"></span>
                <span class="icon git"></span>
            </li>
            <li class="hbox">
                <a class="local" href="contributing.html" title="英文原文：Contributing">贡献</a>
                <span class="spacer boxFlex"></span>
                <span class="icon fork"></span>
            </li>
        </ul>


        <ul>
            <li class="version" title="英文原文：2.2.0 Docs (upgrade info)">2.2.0 文档 (<a href="https://github.com/requirejs/requirejs/wiki/Upgrading-to-RequireJS-2.1">如何升级</a>)</li>
            <!-- <li class="version"><a class="local" href="1.0/">1.0 Doc Link</a></li> -->
        </ul>

    </div>

    <div id="content"><div id="directory" class="section">
<h1>How to use RequireJS with jQuery</h1>

<ul class="index mono">
    <li class="hbox">
        <a href="#intro">Introduction</a><span class="spacer boxFlex"></span><span class="sect">&sect; 1</span>
    </li>
    <li class="hbox">
        <a href="#globalvars">Global Functions</a><span class="spacer boxFlex"></span><span class="sect">&sect; 2</span>
    </li>
    <li class="hbox">
        <a href="#modulename">Module Name</a><span class="spacer boxFlex"></span><span class="sect">&sect; 3</span>
    </li>
    <li class="hbox">
        <a href="#shimconfig">Example using shim config</a><span class="spacer boxFlex"></span><span class="sect">&sect; 4</span>
    </li>
    <li class="hbox">
        <a href="#cdnconfig">Example loading jquery from a CDN</a><span class="spacer boxflex"></span><span class="sect">&sect; 5</span>
    </li>
    <li class="hbox">
        <a href="#noconflictmap">Mapping Modules to use noConflict</a><span class="spacer boxflex"></span><span class="sect">&sect; 6</span>
    </li>
    <li class="hbox">
        <a href="#oldexample">The previous example with a concatenated require-jquery file</a><span class="spacer boxflex"></span><span class="sect">&sect; 7</span>
    </li>
</ul>
</div>

<div class="section">
<h2>
<a name="intro" href="#intro">Introduction</a>
<span class="sectionMark">&sect; 1</span>
</h2>

<p>While RequireJS loads jQuery just like any other dependency, jQuery's wide use and extensive plugin ecosystem mean you'll likely have other scripts in your project that also depend on jQuery. You might approach your jQuery RequireJS configuration differently depending on whether you are starting a new project or whether you are adapting existing code.</p>

<div class="section">
<h2>
<a name="globalvars" href="#globalvars">Global Functions</a>
<span class="sectionMark">&sect; 2</span>
</h2>
<p>jQuery registers itself as the global variables "$" and "jQuery", even when it detects AMD/RequireJS. The AMD approach advises against the use of global functions, but the decision to turn off these jQuery globals hinges on whether you have non-AMD code that depends on them. jQuery has a <a href="http://api.jquery.com/jQuery.noConflict/">noConflict function</a> that supports releasing control of the global variables and this can be automated in your requirejs.config, as we will see <a href="#noconflictmap">later</a>.</p>
</div>

<div class="section">
<h2>
<a name="modulename" href="#modulename">Module Name</a>
<span class="sectionMark">&sect; 3</span>
</h2>

<p>jQuery defines <a href="api.html#modulename">named AMD module</a> 'jquery' (all lower case) when it detects AMD/RequireJS. To reduce confusion, we recommend using 'jquery' as the module name in your requirejs.config.

<p>Example:</p>

<pre><code>requirejs.config({
    baseUrl: 'js/lib',
    paths: {
        // the left side is the module ID,
        // the right side is the path to
        // the jQuery file, relative to baseUrl.
        // Also, the path should NOT include
        // the '.js' file extension. This example
        // is using jQuery 1.9.0 located at
        // js/lib/jquery-1.9.0.js, relative to
        // the HTML page.
        jquery: 'jquery-1.9.0'
    }
});
</code></pre>

<p>The other (recommended) solution is to just name the file 'jquery.js' and
    place it in the baseUrl directory. Then the above paths entry is not needed.</p>

<p>You can avoid lots of configuration lines by placing the files according to
    the default ID-to-path convention of
    <code>baseUrl + moduleID + '.js'</code>. The examples below show how to
    set baseUrl to be the directory for third-party, library code, and use
    one extra paths config for your app code.</p>

<p>So to reiterate, you will likely get an error if you refer to jQuery with another module name, like <code>'lib/jquery'</code>. <strong>This example will not work</strong>:</p>

<pre><code>
    // THIS WILL NOT WORK
    define(['lib/jquery'], function ($) {...});
</code></pre>

<p>It will not work, since jQuery registers itself with the name of 'jquery' and not 'lib/jquery'. In general, explicitly naming modules in the define() call are discouraged, but <a href="https://github.com/requirejs/requirejs/wiki/Updating-existing-libraries#anon">jQuery has some special constraints</a>.</p>

</div>

<div class="section">
<h2>
<a name="shimconfig" href="#shimconfig">Example using shim config</a>
<span class="sectionMark">&sect; 4</span>
</h2>

<p>This example shows how to use the <a href="api.html#config-shim">shim config</a> to specify dependencies for jQuery plugins that do not call <a href="api.html#define">define()</a>. This example is useful if you have an existing jQuery project you want to convert and do not want to modify the sources of the jQuery plugins to call define().</p>

<h4><a class="download" href="http://github.com/requirejs/example-jquery-shim">Example using jQuery with shim config</a></h4>

</div>

<div class="section">
<h2>
<a name="cdnconfig" href="#cdnconfig">Example loading jquery from a CDN</a>
<span class="sectionMark">&sect; 5</span>
</h2>

<p>This is an example on how to load an optimize your code while loading jQuery from a <a href="http://en.wikipedia.org/wiki/Content_delivery_network">Content Delivery Network</a> (CDN). This example requires all your jQuery plugins to call <a href="api.html#define">define()</a> to properly express their dependencies. <a href="api.html#config-shim">Shim config</a> does not work after optimization builds with CDN resources.</p>

<h4><a class="download" href="http://github.com/requirejs/example-jquery-cdn">Example using jQuery from a CDN</a></h4>

</div>

<div class="section">
<h2>
<a name="noconflictmap" href="#noconflictmap">Mapping Modules to use noConflict</a>
<span class="sectionMark">&sect; 6</span>
</h2>

<p>If <strong>all of your modules</strong> (including any third party jQuery plugins or library code that depend on jQuery) are AMD compatible and you want to avoid having $ or jQuery in the global namespace when they call <code>requirejs(['jquery'])</code>, you can use the <a href="api.html#config-map">map config</a> to map the use of jQuery to a module that calls noConflict and returns that value of jQuery for the 'jquery' module ID.</p>

<p>You can use this example with the CDN example above -- the shim example will not work since shimmed libraries need a global jQuery.</p>

<pre><code>requirejs.config({
    // Add this map config in addition to any baseUrl or
    // paths config you may already have in the project.
    map: {
      // '*' means all modules will get 'jquery-private'
      // for their 'jquery' dependency.
      '*': { 'jquery': 'jquery-private' },

      // 'jquery-private' wants the real jQuery module
      // though. If this line was not here, there would
      // be an unresolvable cyclic dependency.
      'jquery-private': { 'jquery': 'jquery' }
    }
});

// and the 'jquery-private' module, in the
// jquery-private.js file:
define(['jquery'], function (jq) {
    return jq.noConflict( true );
});
</code></pre>


<p>This means that any module which uses jQuery will need to use the AMD return value rather than depending on the global $:</p>

<pre><code>
requirejs(['jquery'], function( $ ) {
    console.log( $ ) // OK
});

requirejs(['jquery'], function( jq ) {
    console.log( jq ) // OK
});

requirejs(['jquery'], function( ) {
    console.log( $ ) // UNDEFINED!
});
</code></pre>

</div>

<div class="section">
<h2>
<a name="oldexample">The previous example with a concatenated require-jquery file</a>
<span class="sectionMark">&sect; 7</span>
</h2>
<p>
Previously, we've been pointing to an example using a special require-jquery file, which consisted of require.js and jQuery concatenated. This is no longer the recommended way to use jQuery with require.js, but if you're looking for the (no longer maintained) example, <a href="https://github.com/requirejs/require-jquery">you can find require-jquery here</a>.
</p>
</div>
    </div>
    <div id="footer" class="mono">
        <span class="line" title="英文原文：Latest Release: 2.2.0">最新发布版本: <a href="/docs/download.html">2.2.0</a></span>
        <span class="line" title="英文原文：Open source: new BSD or MIT licensed">开源协议: <a href="https://github.com/requirejs/requirejs/blob/master/LICENSE">NEW BSD 或者 MIT 许可</a></span>
        <span class="line" title="英文原文：web design by Andy Chung &copy; 2011-2015">网站由 <a href="http://andychung.me/">Andy Chung</a> 设计 &copy; 2011-2015</span>
    </div>
</div>

</body>
</html>
